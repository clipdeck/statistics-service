generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl"]
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model WeeklyClipRanking {
  id           String   @id @default(uuid())
  weekStart    DateTime
  weekEnd      DateTime
  submissionId String
  platform     Platform
  views        Int
  likes        Int
  engagement   Float
  rank         Int
  createdAt    DateTime @default(now())

  @@unique([weekStart, submissionId])
  @@index([weekStart, rank])
  @@index([platform, weekStart])
}

model WeeklyCampaignRanking {
  id            String   @id @default(uuid())
  weekStart     DateTime
  weekEnd       DateTime
  campaignId    String
  totalViews    Int
  totalLikes    Int
  avgEngagement Float
  clipsCount    Int
  rank          Int
  createdAt     DateTime @default(now())

  @@unique([weekStart, campaignId])
  @@index([weekStart, rank])
}

enum Platform {
  TIKTOK
  INSTAGRAM
  YOUTUBE
  TWITTER
}
